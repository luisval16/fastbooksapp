<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:f="http://java.sun.com/jsf/core"
             xmlns:bnu="http://bootsfaces.net/ui"
             xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
             xmlns:p="http://primefaces.org/ui">

    <ui:remove>
        <!--
                    Hint to editors: The menus follow the Chicago style of capitalization. Please capitalize everything but the "smaller" words. 
        -->
    </ui:remove>

    <h:form id="tblInvoiceForm">
        #{invoiceTableController.init()}
        #{invoiceTableController.showInvoice()}
        <bnu:row>
            <bnu:column large-screen="10" medium-screen="11" small-screen="12" tiny-screen="12" >
                <h2>#{messages.lblSalesTrans}</h2>
            </bnu:column>
            <bnu:column large-screen="2" medium-screen="1" small-screen="12" tiny-screen="12">
                <bnu:dropButton value="#{messages.lblNewTrans}"  look="success" style="margin-top:20px;" >
                    <bnu:navLink value="#{messages.lblInvoiceTypeIn}" href="#{request.contextPath}/view/sales/invoiceForm.xhtml" ></bnu:navLink>
                    <!-- <bnu:navLink value="Payment"></bnu:navLink>
                     <bnu:navLink value="Estimate"></bnu:navLink>
                     <bnu:navLink value="Sales Receipt"></bnu:navLink>
                     <bnu:navLink value="Credit Note"></bnu:navLink>
                     <bnu:navLink value="Delayed Charged"></bnu:navLink>
                     <bnu:navLink value="Time Activity"></bnu:navLink>-->
                </bnu:dropButton> 
            </bnu:column>
        </bnu:row> 
        <bnu:row>
            <bnu:column span="12">
                <bnu:messages  />
            </bnu:column>
        </bnu:row>
        <p:separator/>
        <bnu:row >
            <bnu:column span="5">
                <div class="dropdown">
                    <bnu:button onclick="myFunction()" value="Filter" style="margin-bottom: 15px"  class="dropLi" iconAwesome="fa-angle-down" icon-align="right" />
                    <div id="myDropdown" class="dropdown-content">
                        <h:form>
                            <li class="dropLi" >Home</li>
                            <li class="dropLi" >About</li>
                            <li class="dropLi" >Contact</li>
                            <li class="dropLi" ><bnu:selectOneMenu label="Type">
                                    <f:selectItem itemLabel="Uno"/>
                                    <f:selectItem itemLabel="Dos"/>
                                    <f:selectItem itemLabel="Tres"/>
                                </bnu:selectOneMenu></li>
                            <li class="dropLi" ><bnu:commandButton value="Apply" look="success"/> <bnu:commandButton value="Reset" look="danger"/> </li>
                        </h:form>
                    </div>
                </div>
            </bnu:column>

        </bnu:row>
        <bnu:row>
            <bnu:column span="12">


                <bnu:iconAwesome name="fa-long-arrow-down" size="2x"  style="margin-right: 15px" />
                <bnu:dropButton value="Batch options" style="margin-bottom:15px"  >
                    <bnu:navLink value="Print transactions" href="#"></bnu:navLink>
                    <bnu:navLink value="Print packing slip" href="#"></bnu:navLink>
                    <bnu:navLink value="Send transaction" href="#"></bnu:navLink>
                    <bnu:navLink value="Send reminder" ></bnu:navLink>
                </bnu:dropButton>
            </bnu:column>
        </bnu:row>
        <bnu:row>
            <bnu:column span="12">
                <bnu:dataTable
                    value="#{invoiceTableController.IList}"
                    id="tblInvoice"
                    var="in"
                    >
                    <bnu:dataTableColumn label="#{messages.lblInvoiceDate}"   >
                        <bnu:selectBooleanCheckbox style="margin-right: 10px" />#{in.inDate}
                    </bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblType}" value="#{invoiceTableController.formatType(in.type)}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblInvoiceNo}"  value="#{in.noDot}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblInvocieCustomer }" value="#{in.idCust.displayName}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblIncoiceDueDate}" value="#{in.dueDate}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblInvoiceBalance}" value="#{in.actualBalance}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblInvoiceTotalBTax}" value="#{in.subTotal}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblInvoiceTax}" value="#{in.taxTotal}"  ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblInvoiceTotal}"  value="#{in.total}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblInvoiceStatus}" value="#{invoiceTableController.formatStatus(in.status)}" ></bnu:dataTableColumn>
                    <bnu:dataTableColumn label="#{messages.lblAction}">

                        <bnu:dropButton value="#{messages.edit}" look="primary" styleClass="hidden-xs hidden-sm" >
                            <bnu:commandButton value="#{messages.edit}"  style="width:100%" action="#{invoiceTableController.edit(in)}" rendered="#{invoiceTableController.showOptions(in.status)}"  />

                            <bnu:commandButton value="#{messages.lblInvoicePrint}"  style="width:100%"  update="pdf" action="#{invoiceTableController.print(in,request)}"  />
                            <bnu:commandButton value="#{messages.lblInvoiceCancel}"  style="width:100%" onclick="ajax:invoiceTableController.assign(in);" rendered="#{invoiceTableController.showOptions(in.status)}"  />
                        </bnu:dropButton>
                        <bnu:commandButton value="#{messages.edit}"  look="warning" styleClass="hidden-lg hidden-md" action="#{invoiceTableController.edit(in)}" rendered="#{invoiceTableController.showOptions(in.status)}"   />



                        <bnu:commandButton value="#{messages.lblInvoicePrint}" update="pdf"  styleClass="hidden-lg hidden-md"  action="#{invoiceTableController.print(in)}"  />
                        <bnu:commandButton value="#{messages.lblInvoiceCancel}"   styleClass="hidden-lg hidden-md"  onclick="ajax:invoiceTableController.assign(in);" rendered="#{invoiceTableController.showOptions(in.status)}"  />
                    </bnu:dataTableColumn>

                </bnu:dataTable>
            </bnu:column>
        </bnu:row>

    </h:form>
    <p:separator/>
    <bnu:modal  id="invoiceModal" title="Invoice" styleClass="invoiceModal"  close-on-escape="false" backdrop="false"  >
        <h:panelGroup id="pdf">

            <p:media value="#{invoiceTableController.invoiceModal}" width="100%" height="500px" rendered="#{not(invoiceTableController.invoiceModal eq '0')}"  />     


        </h:panelGroup>
    </bnu:modal>   

    <bnu:modal  id="cancelModal" title="Invoice" styleClass="cancelModal"  close-on-escape="false" backdrop="false"  >
        <h:panelGroup id="can">
            <h:form>
                <bnu:row>
                    <bnu:column span="12">
                        <h5>#{messages.lblInCancelConfirm }</h5>
                    </bnu:column>
                </bnu:row>
                <bnu:row>
                    <bnu:column span="6"><bnu:commandButton value="#{messages.yes}" look="danger" action="#{invoiceTableController.cancel()}" />
                    </bnu:column>
                    <bnu:column span="6"><bnu:commandButton value="#{messages.No}" look="success"/></bnu:column>
                </bnu:row>


            </h:form>
        </h:panelGroup>
    </bnu:modal> 

    <style>
        /* Dropdown Button */
        .dropbtn {
            background-color: #3498DB;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }

        .dropbtn:hover, .dropbtn:focus {
            background-color: #2980B9;
        }


        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 300px;
            overflow: auto;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
        }


        .dropdown-content li {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content li:hover {background-color: #ddd}

        .show {display:block;}

    </style>

    <h:outputScript>
        function myFunction() {
        document.getElementById("myDropdown").classList.toggle("show");
        };

        $(document).on("click",function(event) {
        var str = $(event.target).parent().parent().attr('class')+' '+$(event.target).parent().attr('class') + ' ' + $(event.target).attr('class');
        //alert(str.indexOf("dropLi")) >= 0);
        if(!str.indexOf("dropLi")) >= 0){
        //document.getElementById("myDropdown").classList.remove('show');
        alert("Eliminar");
        }else{
        alert("Mostrar);
        }
        });
    </h:outputScript>






</ui:fragment>

